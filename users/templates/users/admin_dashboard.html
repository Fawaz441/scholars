<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agba</title>
    <link rel="stylesheet" href="{% static 'css/admin_dash.css' %}">
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    
</head>
<body>
    <div class="backdrop"></div>
    <div class="form_backdrop">
        
        <div class="form_container">
            <span onclick="exitForm()" class="exit">
                <span class="exit_icon"></span>
            </span>
            
            <form action="" class="school_form"  method="POST">
                <h1>Add New School</h1>
                {% csrf_token %}
                {{university_form.as_p}}
                <button type="submit" name="university_btn">SUBMIT</button>
            </form>
            
            <form action="" class="material_form" method="POST" enctype="multipart/form-data">
                <h1>Add New Material</h1>
                {% csrf_token %}
                {{material_form.as_p}}
                <button type="submit" name="material_btn">SUBMIT</button>
            </form>
            
            <form action="" class="pq_form" method="POST" enctype="multipart/form-data" data-courses-url="{% url 'scholars:ajax_load_courses' %}">
                <h1>Add New PQ</h1>
                {% csrf_token %}
                {{pq_form.as_p}}
                <button type="submit" name='pq_btn'>SUBMIT</button>
            </form>
            
            <form action="" class="course_form" method="POST">
                <h1>Add New Course</h1>
                {% csrf_token %}
                {{course_form.as_p}}
                <button type="submit" name="course_btn">SUBMIT</button>
            </form>
        </div>
    </div>
    {% include 'navbar.html' %}
    <div class="graph">
        <canvas id="myChart" width="400" height="400"></canvas>
        <script>
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['January', 'February', 'March', 'April', 'May', 'June','July',
                    ,'August','September','October','November','December'],
                    datasets: [{
                        label: 'Number of Uploads',
                        data: [12, 19, 3, 5, 2, 3,2,14,50,10,4,2],
                        backgroundColor: [
                        'rgb(255, 99, 132)',
                        'rgb(54, 162, 235)',
                        'rgb(255, 206, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(153, 102, 255)',
                        'rgb(255, 159, 64)',
                        'rgb(100, 128, 42)',
                        'rgb(3, 128, 42)',
                        'rgb(123, 28, 42)',
                        'rgb(33, 128, 42)',
                        'rgb(203, 128, 42)',
                        'rgb(201, 128, 42)',
                        ],
                        borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(3, 128, 42,1)',
                        'rgba(123, 28, 42,1)',
                        'rgba(33, 128, 42,1)',
                        'rgba(203, 128, 42,1)',
                        'rgba(201, 128, 42,1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            gridLines: {
                                display: true,
                                color: "rgba(255,255,255,0.2)"
                            }
                        }]
                    }
                }
            });
        </script>
    </div>
    
    <section class="check_section">
        <div class="check_pqs">
            <a href="#"><h3>New PQs</h3></a>
            <a href="#"><h3>{{student_count}} profiles</h3></a>
        </div>
        
        <div class="check_materials">
            <a href="#"><h3>New Materials</h3></a>
            <a href="#" class="mater"><h3>All Materials</h3></a>
        </div>
        
        <div class="check_school_courses">
            <a href="#"><h3>All Schools</h3></a>
        </div>
        
        <div class="check_adverts">
            <a href="#"><h3>New Adverts</h3></a>
        </div>
        
    </section>
    
    <section class="adverts">
        <center><h2>Adverts</h2></center>
        <span class="scroll-left"><span></span></span>
        <div class="adverts_wrapper">
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
            
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
            
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
            <div class="advert">
                <img src="{% static 'images/advert (1).jpg' %}" alt="advert">
                <div class="overlay">
                    <span class="title">Title</span>
                    <span class="price">&#8358;5,000.00</span>
                </div>
            </div>
        </div>
        <span class="scroll-right"><span></span></span>
    </section>
    <section class="add_stuff">
        <a onclick="bringMaterial()"><span class="diff">Add Material</span></a>
        <a onclick="bringPq()"><span class="diff">Add PQ</span></a>
        <a onclick="bringSchool()"><span class="diff">Add University</span></a>
        <a onclick="bringCourse()"><span class="diff">Add Course</span></a>
    </section>
<div class="all_stuff schools">
    <span class="close_modal">Exit</span>
    <ul class="all_">
        {{universities.count}} Universities
        {% for uni in universities %}
        <li class="all_li">{{uni.name}} ({{uni.abbreviation}})         <span>{{uni.state}}       {{uni.pqs.count}}PQs</span></li>
        {% endfor %}
    </ul>
</div>
<div class="all_stuff materials">
    <span class="close_modal">Exit</span>
    <ul class="all_">
        {% for uni in materials %}
        <li class="all_li">{{uni.name}} ({{uni.uploader.user.username}})       <small>{{uni.created_date}}</small>  <a target="__blank" href="{{uni.file.url}}">view</a></li>
        {% endfor %}
    </ul>
</div>

<div class="all_stuff new_adverts">
    <span class="close_modal">Exit</span>
    <ul class="all_">
        {% for uni in new_adverts %}
        <li class="all_li">{{uni.name}} ({{uni.seller.user.username}})  &#8358;{{uni.price}}  <small>{{uni.created_date}}</small>  <a target="__blank" href="{{uni.image1.url}}">view</a>  <span>
            <a href="{% url 'scholars:approve_advert' uni.slug %}" class="approve">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Approve</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M30.29.29,11,19.59l-9.29-9.3A1,1,0,0,0,.29,11.71l10,10a1,1,0,0,0,1.42,0l20-20A1,1,0,1,0,30.29.29Z"/></g></g></svg>
                
            </a>
            <a href="{% url 'scholars:delete_advert' uni.slug %}" class="delete">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 449 513"><defs><style>.cls-1{fill:#fff;stroke:#fff;stroke-miterlimit:10;}</style></defs><title>Delete</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M432.5,32.5h-120l-9.4-18.7A24,24,0,0,0,281.6.5H167.3a23.72,23.72,0,0,0-21.4,13.3l-9.4,18.7H16.5a16,16,0,0,0-16,16v32a16,16,0,0,0,16,16h416a16,16,0,0,0,16-16v-32A16,16,0,0,0,432.5,32.5ZM53.7,467.5a48,48,0,0,0,47.9,45H347.4a48,48,0,0,0,47.9-45l21.2-339H32.5Z"/></g></g></svg>  
            </a>
        </span>
    </li>
    {% empty %}
    <li>No new adverts.</li>
    {% endfor %}
</ul>
</div>

<div class="all_stuff new_materials">
    <span class="close_modal">Exit</span>
    <ul class="all_">
        {% for uni in new_materials %}
        <li class="all_li">{{uni.name}} ({{uni.uploader.user.username}})  <small>{{uni.created_date}}</small>  <a target="__blank" href="{{uni.file.url}}">view</a>  <span>
            <a href="{% url 'scholars:approve_material' uni.slug %}" class="approve">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Approve</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M30.29.29,11,19.59l-9.29-9.3A1,1,0,0,0,.29,11.71l10,10a1,1,0,0,0,1.42,0l20-20A1,1,0,1,0,30.29.29Z"/></g></g></svg>
                
            </a>
            <a href="{% url 'scholars:delete_material' uni.slug %}" class="delete">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 449 513"><defs><style>.cls-1{fill:#fff;stroke:#fff;stroke-miterlimit:10;}</style></defs><title>Delete</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M432.5,32.5h-120l-9.4-18.7A24,24,0,0,0,281.6.5H167.3a23.72,23.72,0,0,0-21.4,13.3l-9.4,18.7H16.5a16,16,0,0,0-16,16v32a16,16,0,0,0,16,16h416a16,16,0,0,0,16-16v-32A16,16,0,0,0,432.5,32.5ZM53.7,467.5a48,48,0,0,0,47.9,45H347.4a48,48,0,0,0,47.9-45l21.2-339H32.5Z"/></g></g></svg>  
            </a>
        </span>
    </li>
    {% empty %}
    <li>No new materials.</li>
    {% endfor %}
</ul>
</div>

<div class="all_stuff new_pqs">
    <span class="close_modal">Exit</span>
    <ul class="all_">
        {% for uni in new_pqs %}
        <li class="all_li">{{uni.name}} ({{uni.uploader.user.username}})  <small>{{uni.created_date}}</small>  <a target="__blank" href="{{uni.file.url}}">view</a>  <span>
            <a href="{% url 'scholars:approve_pq' uni.slug %}" class="approve">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Approve</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M30.29.29,11,19.59l-9.29-9.3A1,1,0,0,0,.29,11.71l10,10a1,1,0,0,0,1.42,0l20-20A1,1,0,1,0,30.29.29Z"/></g></g></svg>
                
            </a>
            <a href="{% url 'scholars:delete_pq' uni.slug %}" class="delete">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 449 513"><defs><style>.cls-1{fill:#fff;stroke:#fff;stroke-miterlimit:10;}</style></defs><title>Delete</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M432.5,32.5h-120l-9.4-18.7A24,24,0,0,0,281.6.5H167.3a23.72,23.72,0,0,0-21.4,13.3l-9.4,18.7H16.5a16,16,0,0,0-16,16v32a16,16,0,0,0,16,16h416a16,16,0,0,0,16-16v-32A16,16,0,0,0,432.5,32.5ZM53.7,467.5a48,48,0,0,0,47.9,45H347.4a48,48,0,0,0,47.9-45l21.2-339H32.5Z"/></g></g></svg>  
            </a>
        </span>
    </li>
    {% empty %}
    <li>No new Past Questions.</li>
    {% endfor %}
</ul>
</div>

</body>
<script src="{% static 'js/admin_dash.js' %}"></script>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    $("#id_university").change(function(){
        var url = $("#pqForm").attr("data-courses-url");
        var universityId = $(this).val();
        
        $.ajax({
            url:url,
            data:{
                'university':universityId
            },
            success:function(data){
                $("#id_course").html(data);
            }
        });
    });
</script>
</html>